# Feature: Cleanup Progress — Research

**Researched:** 2026-02-20
**Domain:** Codebase cleanup / dead code removal
**Confidence:** HIGH

## User Constraints (from FEATURE.md)

### Locked Decisions
- **Removal scope:** Full removal — command, skill, workflow, references, tests, and orphaned utilities
- **Codebase coverage:** Check both C# and JS codebases for remnants
- **Motivation:** Redundant with `/gfd:status`

### Out of Scope
- None specified — full removal is the directive

---

## Summary

This is a dead-code removal task, not a feature addition. The progress command was originally the primary status command but was superseded by `/gfd:status` during the `status` feature implementation. The `csharp-rewrite` feature partially cleaned it up (removing the workflow file and C# implementation), but the slash command skill file and several workflow references were left behind.

Research confirms the workflow file (`get-features-done/workflows/progress.md`) and the C# `ProgressCommand.cs` are **already deleted**. There is **no JS codebase** — the project is pure C# (with markdown workflow files). There are **no tests** for the progress command.

What remains: one skill definition file to delete, five `/gfd:progress` references in three active workflow files to replace with `/gfd:status`, and three stale codebase documentation files to update.

**Primary recommendation:** Delete `commands/gfd/progress.md`, replace all five active `/gfd:progress` references with `/gfd:status`, and update the three `docs/features/codebase/` docs to remove `progress.md` entries.

---

## Inventory of Artifacts to Remove or Update

### Already Removed (no action needed)

| Artifact | Status | Evidence |
|----------|--------|----------|
| `get-features-done/workflows/progress.md` | ALREADY DELETED | Not in file listing; confirmed in `docs/features/csharp-rewrite/VERIFICATION.md`: "File does not exist" |
| `get-features-done/GfdTools/Commands/ProgressCommand.cs` | ALREADY DELETED | Not in Commands/ directory; no reference in `Program.cs` |
| JS codebase | DOES NOT EXIST | No `.js` or `.ts` files anywhere in the repo |
| Progress command tests | NONE EXIST | No test files found anywhere in the repo |

### Must Delete

| File | Why |
|------|-----|
| `commands/gfd/progress.md` | The Claude Code slash command skill — the `/gfd:progress` entry point. Still exists. |

**Content of `commands/gfd/progress.md`:**
```yaml
name: gfd:progress
description: Check project progress and route to next action
allowed-tools: Read, Bash, Grep, Glob
```
References workflow file at `~/.claude/get-features-done/workflows/progress.md` (which is already deleted).

### Must Update — Active Workflow Files

These files contain live `/gfd:progress` references that will be broken after the skill is removed.

| File | Line(s) | Current Text | Replace With |
|------|---------|-------------|-------------|
| `get-features-done/workflows/convert-from-gsd.md` | 31 | `run /gfd:progress instead.` | `run /gfd:status instead.` |
| `get-features-done/workflows/convert-from-gsd.md` | 602 | `` `/gfd:progress` `` | `` `/gfd:status` `` |
| `get-features-done/workflows/new-project.md` | 32 | `Run /gfd:progress to see current status.` | `Run /gfd:status to see current status.` |
| `get-features-done/workflows/new-project.md` | 415 | `- \`/gfd:progress\` — see overall project status` | `- \`/gfd:status\` — see overall project status` |
| `get-features-done/workflows/map-codebase.md` | 390 | `` `/gfd:progress` `` | `` `/gfd:status` `` |

**Context for each:**
- `convert-from-gsd.md:31` — error block telling users with an existing GFD project to use another command
- `convert-from-gsd.md:602` — "Next Up" section at workflow completion
- `new-project.md:32` — error block when `docs/features/` already exists
- `new-project.md:415` — "Also available" section at workflow completion
- `map-codebase.md:390` — "Next Up" section at workflow completion

### Must Update — Codebase Documentation

These files in `docs/features/codebase/` are stale (generated by map-codebase and treated as ground truth reference). They reference `progress.md` which no longer exists. The acceptance criterion "No remaining dead code or broken references after removal" covers these.

| File | What to Update |
|------|---------------|
| `docs/features/codebase/ARCHITECTURE.md` | Line 143: remove `progress.md` from file list. Line 151: remove step 5 (`/gfd:progress`) or replace with `/gfd:status`. |
| `docs/features/codebase/STACK.md` | Line 111: remove `/gfd:progress` from slash commands list. |
| `docs/features/codebase/STRUCTURE.md` | Line 22: remove `progress.md` entry. Line 65: remove `progress.md` entry. Line 169: remove `gfd:progress` from command names. |

---

## Architecture Patterns

### This Codebase's Pattern for Slash Commands

```
commands/gfd/<name>.md          ← Claude Code skill file (thin wrapper)
  └── @references → get-features-done/workflows/<name>.md   ← actual workflow logic
```

The skill file at `commands/gfd/progress.md` references:
```
@$HOME/.claude/get-features-done/workflows/progress.md
```
The `~/.claude/` path is the installed location (symlinked from the repo via `install.sh`). Since the workflow was already deleted, the skill file now points to a non-existent file.

### How Deletion Works

No de-registration step is needed. Claude Code discovers slash commands by scanning `~/.claude/commands/` (or project `.claude/commands/`). Deleting the `.md` file removes the command.

---

## Don't Hand-Roll

| Problem | Don't Build | Use Instead |
|---------|-------------|-------------|
| Verifying no `/gfd:progress` refs remain | Custom grep logic | `grep -r "gfd:progress" get-features-done/ commands/` |
| Finding the skill file | Guessing paths | It's at `commands/gfd/progress.md` (verified by direct inspection) |

---

## Common Pitfalls

### Pitfall 1: Missing Workflow References in Workflows Not Directly About Progress
**What goes wrong:** Only searching for `gfd:progress` in obvious places and missing workflow-final "Also available" sections.
**How to avoid:** Use `grep -rn "gfd:progress"` across all of `get-features-done/` and `commands/` as a verification step after changes.
**Warning signs:** Any occurrence of `` `/gfd:progress` `` in a "Next Up" or "Also available" section.

### Pitfall 2: Updating Agents Instead of Workflows
**What goes wrong:** Searching `agents/` instead of `get-features-done/workflows/` — agents don't contain the references.
**Reality:** Grep confirms agents directory has zero `gfd:progress` references. All references are in workflows.

### Pitfall 3: Treating Codebase Docs as Immutable
**What goes wrong:** Treating `docs/features/codebase/` as historical records and not updating them.
**Reality:** These docs are generated snapshots used as reference by the system. They should reflect actual codebase state.

### Pitfall 4: Treating Historical Feature Docs as Active
**What goes wrong:** Trying to update `docs/features/status/RESEARCH.md` or `docs/features/csharp-rewrite/` files.
**Reality:** Files under `docs/features/*/` (PLAN.md, SUMMARY.md, RESEARCH.md, VERIFICATION.md) are immutable historical records. Leave them alone.

---

## Verification Steps

After all changes, run:

```bash
# Must return zero results
grep -rn "gfd:progress" get-features-done/ commands/ docs/features/codebase/

# Must not exist
ls commands/gfd/progress.md 2>/dev/null && echo "EXISTS - ERROR" || echo "DELETED - OK"

# Workflow file already gone - confirm
ls get-features-done/workflows/progress.md 2>/dev/null && echo "EXISTS - ERROR" || echo "ALREADY DELETED - OK"
```

---

## Open Questions

1. **Should the commands/ directory structure in ARCHITECTURE.md and STRUCTURE.md add `/gfd:status`?**
   - What we know: `/gfd:status` was added during the `status` feature, but codebase docs weren't updated then either.
   - What's unclear: Whether adding status references is in scope for this cleanup task.
   - Recommendation: This task should at minimum remove `progress.md` entries. Adding `status.md` references is a bonus but may be out of scope per FEATURE.md ("remove ... not update all docs"). Keep changes minimal — only remove the broken references, don't reconstruct the docs.

---

## Sources

### Primary (HIGH confidence — direct file inspection)

- Direct inspection of `commands/gfd/progress.md` — confirmed file exists
- Direct inspection of `get-features-done/workflows/` directory — confirmed `progress.md` absent
- Direct inspection of `get-features-done/GfdTools/Commands/` — confirmed no `ProgressCommand.cs`
- Direct inspection of `get-features-done/GfdTools/Program.cs` — confirmed no progress command registration
- `grep -rn "gfd:progress"` across entire repo — confirmed exact reference locations

### Secondary (MEDIUM confidence)

- `docs/features/csharp-rewrite/VERIFICATION.md` — documents that `progress.md` workflow and C# command were previously deleted
- `docs/features/status/VERIFICATION.md` — notes that progress command still exists alongside new status command (at time of writing; this confirms the current gap)

---

## Metadata

**Confidence breakdown:**
- What's already removed: HIGH — directly verified by file listing
- What to delete: HIGH — `commands/gfd/progress.md` directly inspected
- Workflow references: HIGH — exact line numbers confirmed by grep
- Codebase docs: HIGH — exact lines confirmed by grep and read
- Tests: HIGH — no test infrastructure found anywhere in repo

**Research date:** 2026-02-20
**Valid until:** N/A (this is a point-in-time cleanup task)
