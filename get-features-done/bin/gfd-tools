#!/usr/bin/env bash
# Wrapper script for GFD Tools C# CLI
# Resolves symlinks to avoid .NET's symlink path bug with dotnet run --project
REAL_SOURCE="${BASH_SOURCE[0]}"
while [ -L "$REAL_SOURCE" ]; do
  LINK_DIR="$(cd "$(dirname "$REAL_SOURCE")" && pwd)"
  REAL_SOURCE="$(readlink "$REAL_SOURCE")"
  [[ "$REAL_SOURCE" != /* ]] && REAL_SOURCE="$LINK_DIR/$REAL_SOURCE"
done
SCRIPT_DIR="$(cd "$(dirname "$REAL_SOURCE")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")/GfdTools"
exec dotnet run --project "$PROJECT_DIR" -- "$@"
